# .env.example
# Copy this to .env and fill in your values
# SECURITY: Never commit .env to version control

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://user:password@localhost:5432/pypaas

# For local development with SQLite (not recommended for production):
# DATABASE_URL=sqlite:///./local.db

# ============================================================================
# API AUTHENTICATION
# ============================================================================
# API key for webhook and management endpoints
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
API_KEY=your-secret-api-key-here

# GitHub webhook secret (must match GitHub webhook configuration)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
GITHUB_WEBHOOK_SECRET=your-webhook-secret

# JWT secret for token-based authentication (optional)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET=your-jwt-secret-here

# ============================================================================
# DOCKER REGISTRY (Optional)
# ============================================================================
# Private Docker registry configuration
DOCKER_REGISTRY_URL=
DOCKER_REGISTRY_USERNAME=
DOCKER_REGISTRY_PASSWORD=

# ============================================================================
# DEPLOYMENT MODE
# ============================================================================
# Options: local, aws
DEPLOYMENT_MODE=local

# ============================================================================
# SELF-HEALING CONFIGURATION
# ============================================================================
# Enable/disable the self-healing daemon
ENABLE_HEALER=true

# Healer check interval in seconds
HEALER_INTERVAL=30

# ============================================================================
# LOGGING
# ============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8085

# ============================================================================
# AWS CONFIGURATION (Optional - for AWS deployment mode)
# ============================================================================
# AWS region
AWS_REGION=us-east-1

# AWS credentials (better to use IAM roles in production)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=

# AWS SSM parameter paths (when using DEPLOYMENT_MODE=aws)
# SSM_API_KEY_PATH=/pypaas/API_KEY
# SSM_GITHUB_WEBHOOK_SECRET_PATH=/pypaas/GITHUB_WEBHOOK_SECRET

# ============================================================================
# NGINX CONFIGURATION
# ============================================================================
# Nginx configuration paths (adjust for your system)
NGINX_CONFIG_PATH=/etc/nginx/sites-available
NGINX_ENABLED_PATH=/etc/nginx/sites-enabled

# ============================================================================
# RATE LIMITING
# ============================================================================
# Rate limit for webhook endpoint (requests per minute)
WEBHOOK_RATE_LIMIT=10

# Rate limit window in seconds
RATE_LIMIT_WINDOW=60

# ============================================================================
# HEALTH CHECK CONFIGURATION
# ============================================================================
# Container health check timeout in seconds
HEALTH_CHECK_TIMEOUT=30

# Health check interval in seconds
HEALTH_CHECK_INTERVAL=2

# ============================================================================
# TERRAFORM BACKEND (for infrastructure deployment)
# ============================================================================
# S3 bucket for Terraform state
# TF_VAR_state_bucket=your-terraform-state-bucket

# DynamoDB table for state locking
# TF_VAR_lock_table=terraform-locks

# ============================================================================
# DEVELOPMENT / TESTING
# ============================================================================
# Run integration tests (set to 1 to enable)
# RUN_INTEGRATION=0

# Test database URL (for running tests)
# TEST_DATABASE_URL=postgresql://test_user:test_password@localhost:5432/test_pypaas
