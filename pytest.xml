<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="3" skipped="3" tests="73" time="2.272" timestamp="2025-12-25T11:09:13.287084+00:00" hostname="serverterminal"><testcase classname="tests.integration.test_deployment_flow" name="test_deployment_flow_healthcheck" time="0.001"><skipped type="pytest.skip" message="Integration tests disabled (set RUN_INTEGRATION=1)">/home/server/git-deploy-healer/tests/integration/test_deployment_flow.py:27: Integration tests disabled (set RUN_INTEGRATION=1)</skipped></testcase><testcase classname="tests.integration.test_healer_recovery" name="test_healer_restarts_container" time="0.001"><skipped type="pytest.skip" message="Integration tests disabled (set RUN_INTEGRATION=1)">/home/server/git-deploy-healer/tests/integration/test_healer_recovery.py:32: Integration tests disabled (set RUN_INTEGRATION=1)</skipped></testcase><testcase classname="tests.integration.test_webhook_to_deploy" name="test_webhook_triggers_deploy" time="0.001"><skipped type="pytest.skip" message="Integration tests disabled (set RUN_INTEGRATION=1)">/home/server/git-deploy-healer/tests/integration/test_webhook_to_deploy.py:27: Integration tests disabled (set RUN_INTEGRATION=1)</skipped></testcase><testcase classname="tests.unit.test_api_endpoints" name="test_health_endpoint" time="0.013"><failure message="TypeError: AsyncClient.__init__() got an unexpected keyword argument 'app'">@pytest.mark.asyncio
    async def test_health_endpoint():
&gt;       async with AsyncClient(app=app, base_url="http://test") as ac:
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       TypeError: AsyncClient.__init__() got an unexpected keyword argument 'app'

tests/unit/test_api_endpoints.py:10: TypeError</failure></testcase><testcase classname="tests.unit.test_api_endpoints" name="test_trigger_endpoint" time="0.018"><failure message="TypeError: AsyncClient.__init__() got an unexpected keyword argument 'app'">monkeypatch = &lt;_pytest.monkeypatch.MonkeyPatch object at 0x77a0bd4f2c00&gt;

    @pytest.mark.asyncio
    async def test_trigger_endpoint(monkeypatch):
        # mock healer trigger
        from api import healer as healer_module

        monkeypatch.setattr(healer_module, "trigger_heal", lambda: None)

&gt;       async with AsyncClient(app=app, base_url="http://test") as ac:
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       TypeError: AsyncClient.__init__() got an unexpected keyword argument 'app'

tests/unit/test_api_endpoints.py:23: TypeError</failure></testcase><testcase classname="tests.unit.test_docker_manager" name="test_build_image_success" time="0.006" /><testcase classname="tests.unit.test_docker_manager" name="test_build_image_failure" time="0.004" /><testcase classname="tests.unit.test_docker_manager" name="test_run_container_and_stop" time="0.005" /><testcase classname="tests.unit.test_git_manager.TestGitManagerInit" name="test_init_creates_base_path" time="0.006" /><testcase classname="tests.unit.test_git_manager.TestGitManagerInit" name="test_init_with_existing_path" time="0.005" /><testcase classname="tests.unit.test_git_manager.TestCloneRepository" name="test_clone_new_repository_success" time="0.007" /><testcase classname="tests.unit.test_git_manager.TestCloneRepository" name="test_clone_existing_repository_pulls" time="0.008" /><testcase classname="tests.unit.test_git_manager.TestCloneRepository" name="test_clone_repository_git_error" time="0.048" /><testcase classname="tests.unit.test_git_manager.TestCloneRepository" name="test_clone_with_special_characters_in_name" time="0.006" /><testcase classname="tests.unit.test_git_manager.TestPullRepository" name="test_pull_repository_success" time="0.005" /><testcase classname="tests.unit.test_git_manager.TestPullRepository" name="test_pull_repository_not_found" time="0.005" /><testcase classname="tests.unit.test_git_manager.TestPullRepository" name="test_pull_repository_git_error" time="0.005" /><testcase classname="tests.unit.test_git_manager.TestGetCommitHash" name="test_get_commit_hash_success" time="0.005" /><testcase classname="tests.unit.test_git_manager.TestGetCommitHash" name="test_get_commit_hash_short" time="0.006" /><testcase classname="tests.unit.test_git_manager.TestGetCommitHash" name="test_get_commit_hash_repository_not_found" time="0.005" /><testcase classname="tests.unit.test_git_manager.TestGetRepositoryPath" name="test_get_repository_path" time="0.004" /><testcase classname="tests.unit.test_git_manager.TestGetRepositoryPath" name="test_get_repository_path_with_base_path_trailing_slash" time="0.012"><failure message="AssertionError: assert '/tmp/repos//test-app' == '/tmp/repos/test-app'&#10;  &#10;  #x1B[0m#x1B[91m- /tmp/repos/test-app#x1B[39;49;00m#x1B[90m#x1B[39;49;00m&#10;  #x1B[92m+ /tmp/repos//test-app#x1B[39;49;00m#x1B[90m#x1B[39;49;00m&#10;  ?            +#x1B[90m#x1B[39;49;00m">self = &lt;test_git_manager.TestGetRepositoryPath object at 0x77a0bd6feed0&gt;

    def test_get_repository_path_with_base_path_trailing_slash(self):
        """Test path construction with trailing slash in base path."""
        manager = GitManager(base_path="/tmp/repos/")
        path = manager.get_repository_path("test-app")
&gt;       assert path == "/tmp/repos/test-app"
E       AssertionError: assert '/tmp/repos//test-app' == '/tmp/repos/test-app'
E
E         #x1B[0m#x1B[91m- /tmp/repos/test-app#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
E         #x1B[92m+ /tmp/repos//test-app#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
E         ?            +#x1B[90m#x1B[39;49;00m

tests/unit/test_git_manager.py:188: AssertionError</failure></testcase><testcase classname="tests.unit.test_git_manager.TestRepositoryExists" name="test_repository_exists_true" time="0.004" /><testcase classname="tests.unit.test_git_manager.TestRepositoryExists" name="test_repository_exists_false" time="0.005" /><testcase classname="tests.unit.test_git_manager.TestDeleteRepository" name="test_delete_repository_success" time="0.004" /><testcase classname="tests.unit.test_git_manager.TestDeleteRepository" name="test_delete_repository_not_found" time="0.004" /><testcase classname="tests.unit.test_git_manager.TestDeleteRepository" name="test_delete_repository_permission_error" time="0.005" /><testcase classname="tests.unit.test_git_manager.TestListRepositories" name="test_list_repositories" time="0.004" /><testcase classname="tests.unit.test_git_manager.TestListRepositories" name="test_list_repositories_empty" time="0.005" /><testcase classname="tests.unit.test_git_manager.TestIntegration" name="test_clone_and_get_commit_hash" time="0.006" /><testcase classname="tests.unit.test_healer" name="test_healer_runs_one_cycle" time="0.007" /><testcase classname="tests.unit.test_healer" name="test_healer_handles_exceptions" time="0.007" /><testcase classname="tests.unit.test_healer_extra" name="test_trigger_heal_no_healer_available" time="0.005" /><testcase classname="tests.unit.test_healer_extra" name="test_trigger_heal_object_without_method" time="0.004" /><testcase classname="tests.unit.test_healer_extra" name="test_container_healer_client_property" time="0.004" /><testcase classname="tests.unit.test_healer_extra" name="test_check_health_client_list_failure" time="0.004" /><testcase classname="tests.unit.test_healer_extra" name="test_heal_increments_counter_when_running" time="0.005" /><testcase classname="tests.unit.test_healer_extra" name="test_heal_uses_engine_deploy_and_handles_exceptions" time="0.006" /><testcase classname="tests.unit.test_healer_extra" name="test_heal_handles_api_error" time="0.005" /><testcase classname="tests.unit.test_proxy_manager.TestProxyManagerInit" name="test_init_default_paths" time="0.004" /><testcase classname="tests.unit.test_proxy_manager.TestProxyManagerInit" name="test_init_custom_paths" time="0.005" /><testcase classname="tests.unit.test_proxy_manager.TestProxyManagerInit" name="test_init_creates_directories" time="0.004" /><testcase classname="tests.unit.test_proxy_manager.TestGenerateConfig" name="test_generate_config_basic" time="0.004" /><testcase classname="tests.unit.test_proxy_manager.TestGenerateConfig" name="test_generate_config_with_ssl" time="0.005" /><testcase classname="tests.unit.test_proxy_manager.TestGenerateConfig" name="test_generate_config_with_custom_headers" time="0.004" /><testcase classname="tests.unit.test_proxy_manager.TestGenerateConfig" name="test_generate_config_with_websocket_support" time="0.006" /><testcase classname="tests.unit.test_proxy_manager.TestWriteConfig" name="test_write_config_success" time="0.007" /><testcase classname="tests.unit.test_proxy_manager.TestWriteConfig" name="test_write_config_overwrite" time="0.007" /><testcase classname="tests.unit.test_proxy_manager.TestWriteConfig" name="test_write_config_no_overwrite" time="0.007" /><testcase classname="tests.unit.test_proxy_manager.TestWriteConfig" name="test_write_config_permission_error" time="0.007" /><testcase classname="tests.unit.test_proxy_manager.TestEnableConfig" name="test_enable_config_success" time="0.006" /><testcase classname="tests.unit.test_proxy_manager.TestEnableConfig" name="test_enable_config_already_enabled" time="0.005" /><testcase classname="tests.unit.test_proxy_manager.TestEnableConfig" name="test_enable_config_not_found" time="0.005" /><testcase classname="tests.unit.test_proxy_manager.TestDisableConfig" name="test_disable_config_success" time="0.005" /><testcase classname="tests.unit.test_proxy_manager.TestDisableConfig" name="test_disable_config_not_enabled" time="0.005" /><testcase classname="tests.unit.test_proxy_manager.TestRemoveConfig" name="test_remove_config_success" time="0.005" /><testcase classname="tests.unit.test_proxy_manager.TestRemoveConfig" name="test_remove_config_not_found" time="0.005" /><testcase classname="tests.unit.test_proxy_manager.TestRemoveConfig" name="test_remove_config_only_available" time="0.006" /><testcase classname="tests.unit.test_proxy_manager.TestReloadNginx" name="test_reload_nginx_success" time="0.005" /><testcase classname="tests.unit.test_proxy_manager.TestReloadNginx" name="test_reload_nginx_failure" time="0.005" /><testcase classname="tests.unit.test_proxy_manager.TestReloadNginx" name="test_reload_nginx_command_not_found" time="0.005" /><testcase classname="tests.unit.test_proxy_manager.TestReloadNginx" name="test_reload_nginx_timeout" time="0.005" /><testcase classname="tests.unit.test_proxy_manager.TestTestNginxConfig" name="test_test_config_valid" time="0.005" /><testcase classname="tests.unit.test_proxy_manager.TestTestNginxConfig" name="test_test_config_invalid" time="0.005" /><testcase classname="tests.unit.test_proxy_manager.TestListConfigs" name="test_list_configs" time="0.007" /><testcase classname="tests.unit.test_proxy_manager.TestListConfigs" name="test_list_configs_empty" time="0.005" /><testcase classname="tests.unit.test_proxy_manager.TestReadConfig" name="test_read_config_success" time="0.008" /><testcase classname="tests.unit.test_proxy_manager.TestReadConfig" name="test_read_config_not_found" time="0.004" /><testcase classname="tests.unit.test_proxy_manager.TestUpdateConfig" name="test_update_config_success" time="0.007" /><testcase classname="tests.unit.test_proxy_manager.TestUpdateConfig" name="test_update_config_not_found" time="0.004" /><testcase classname="tests.unit.test_proxy_manager.TestIntegration" name="test_full_deployment_workflow" time="0.010" /><testcase classname="tests.unit.test_proxy_manager.TestIntegration" name="test_removal_workflow" time="0.006" /><testcase classname="tests.unit.test_proxy_manager.TestIntegration" name="test_update_and_reload_workflow" time="0.008" /></testsuite></testsuites>
